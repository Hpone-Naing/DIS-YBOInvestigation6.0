@model YBOInvestigation.Paging.PagingList<YBOInvestigation.Classes.DriverPunishmentInfo>

@{
    Layout = "_Layout";
}

@{
    ViewData["Title"] = "Search Vehicle";
}
<div class="d-flex justify-content-center align-item-center pb-4">
    <label class="text-primary h4"> မော်တော်ယာဥ်ရှာရန်</label>
</div>
@if (TempData.ContainsKey("Message") && TempData.ContainsKey("CssColor"))
{
    <div class="alert @TempData["CssColor"]"> @TempData["Message"] </div>
}
<div class="row mt-3 search-container">
    <div class="col-lg-8">
        <form class="input-group" method="get" action="@Url.Action("SearchVehicle", "VehicleData")">

            <div class="col">
                <input  type="text" class="form-control" name="SearchString" placeholder="[Enter keyword to Search]" style="border-top-left-radius: 25px !important;border-bottom-left-radius: 25px;" autocomplete="off">
                <datalist id="datas">
                    @foreach (var i in ViewBag.AutoComplete)
                    {
                        <option value="@i.VehicleNumber" />
                        <option value="@i.YBSTypeName" />
                    }
                </datalist>
            </div>
            <div class="input-group-append" style="background-color: white;">
                <button type="submit" class="btn btn-outline"><i class="fa fa-search mt-1" style="color: #3a80b3;"></i></button>

            </div>
            <div class="input-group-append">
                <select class="form-select" name="SearchOption" style="border-top-right-radius: 25px;border-bottom-right-radius: 25px;background-color: #d0d0d075; width:123px;">
                    <option value="VehicleNumber" selected>ယာဥ်နံပါတ်</option>
                    <option value="idNumber">ID Number</option>
                    <option value="driverName">Driver Name</option>
                    <option value="licenseNumber">License Number</option>
                </select>
            </div>
        </form>
    </div>
</div>

<div style="background-color: royalblue;" class="row mt-3 border border-dark">
    <div class="d-flex justify-content-center align-item-center p-1">
        @if (!string.IsNullOrEmpty(ViewBag.SearchString))
        {
            <label class="text-white"> ရှာ‌ဖွေမှုရလဒ်များ </label>
        }
        else
        {
            <label class="text-white"> ရှာဖွေပါ </label>
        }
    </div>
</div>
@if (ViewBag.AutoComplete.Count < 1)
{
    <span class="text-danger"><i class="fas fa-exclamation-triangle"></i>မော်တော်ယာဥ်နှင့်သက်ဆိုင်သောဒေတာများမရှိသေးပါ။</span>
    <span class="text-danger">Transportation Departmentကိုဆက်သွယ်၍မော်တော်ယာဥ်အချက်အလက်များကိုဦးစွာဖြည့်သွင်းပါ။</span>
}
else
{
    @if (Model != null && Model.Count > 0 && Model.Any())
    {
        @foreach (var item in Model)
        {
            @if (item.VehicleData != null)
            {
                <div class="row mt-1 border border-dark">
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <div class="row p-2">
                            <label class="fw-bold col-lg-6 col-md-6 col-sm-4 control-label">ယာဥ်လိုင်း</label>
                            <div class="col-lg-6 col-md-6 col-sm-8">
                                @Html.DisplayFor(modelItem => item.VehicleData.YBSName)
                            </div>
                        </div>
                        <div class="row p-2" style="background-color: #c0c0c052;">
                            <label class="fw-bold col-lg-6 col-md-6 col-sm-4 control-label">ယာဥ်အမှတ်</label>
                            <div class="col-lg-6 col-md-6 col-sm-8">
                                @Html.DisplayFor(modelItem => item.VehicleData.VehicleNumber)
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <div class="row p-2">
                            <label class="fw-bold col-lg-6 col-md-6 col-sm-4 control-label">ယာဥ်အမျိုးအမည်</label>
                            <div class="col-lg-6 col-md-6 col-sm-8">
                                @Html.DisplayFor(modelItem => item.VehicleData.YBSType.YBSTypeName)
                            </div>
                        </div>
                        <div class="row p-2" style="background-color: #c0c0c052;">
                            <label class="fw-bold col-lg-6 col-md-6 col-sm-4 control-label">ယာဥ်အမျိုးအစား</label>
                            <div class="col-lg-6 col-md-6 col-sm-8">
                                @Html.DisplayFor(modelItem => item.VehicleData.Manufacturer.ManufacturerName)
                            </div>
                        </div>
                    </div>
                    <div class="col d-flex justify-content-center mt-2 mb-2">
                        <a class="btn btn-primary rounded-pill" asp-controller="VehicleData" asp-action="Details" asp-route-vehicleId="@item.VehicleData.VehicleDataPkid" asp-route-driverId="@(@item.Driver != null ? item.Driver.DriverPkid : 0)">အသေးစိတ်</a>
                    </div>
                </div>
            }
        }

        <br />

        var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
        var nextDisabled = !Model.HasNextPage ? "disabled" : "";
        var totalPageNo = Model.TotalPageNo;
        var currentPageNo = Model.PageIndex;
        var searchString = ViewBag.SearchString ?? null;
        var searchOption = ViewBag.SearchOption ?? null;

        <a asp-action="List"
           asp-route-pageNo="@(Model.PageIndex - 1)"
           asp-route-SearchString="@searchString"
           asp-route-SearchOption="@searchOption"
           class="link btn btn-primary btn-sm @prevDisabled">
            Previous
        </a>
        <a asp-action="List"
           asp-route-pageNo="@(Model.PageIndex + 1)"
           asp-route-SearchString="@searchString"
           asp-route-SearchOption="@searchOption"
           class="link btn btn-primary btn-sm @nextDisabled">
            Next
        </a>
        <span>
            Page No : @currentPageNo of @totalPageNo
        </span>
    }
    else
    {
        if (!string.IsNullOrEmpty(ViewBag.SearchString))
        {
            <div class="d-flex align-item-center justify-content-center mt-2">
                <span class="text-danger" style="font-size: 20px;font-weight: bold;opacity: 0.5;">ရှာဖွေမှုရလာဒ်များမတွေ့ရှိပါ</span>
            </div>
        }

        else
        {
            <div class="row mt-3">
                <span class="text-danger" style="font-size: clamp(12px, 4vw, 20px);font-weight: bold;opacity: 0.5;">ယာဥ်နံပါတ်/ယာဥ်မောင်းအမည်/လိုင်စင်နံပါတ်/ID Numberတို့ဖြင့်ရှာဖွေပါ</span>
            </div>
        }
    }
}